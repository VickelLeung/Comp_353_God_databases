
CREATE TABLE Employees(
    SIN INT AUTO_INCREMENT PRIMARY KEY,
    UNIQUE (SIN),
    Name CHAR(20) NOT NULL,
    UNIQUE(Name),
    Gender CHAR(6) NOT NULL,
    DOB CHAR(20) NOT NULL,
    Address CHAR(50) NOT NULL,
    PhoneNumber CHAR(10)NOT NULL,
    Salary int NOT NULL,
    DeptNumber int NOT NULL
);

ALTER TABLE Employees ADD FOREIGN KEY (Deptnumber) REFERENCES Departments(Deptnumber);

CREATE TABLE Dependants(
    SID INT AUTO_INCREMENT PRIMARY KEY,
    Name CHAR(20) NOT NULL,
    Gender CHAR(6) NOT NULL,
    DOB VAR(20) NOT NULL,
    EmployeeSIN INT
 );

ALTER TABLE Dependants ADD FOREIGN KEY (EmployeeSIN) REFERENCES Employees(EmployeesSIN);

CREATE TABLE RelatesTo(
    EmployeeSIN int NOT NULL,
    DependantSIN int NOT NULL,
    FOREIGN KEY (DependantSIN) REFERENCES Dependants(DependantSIN),
    FOREIGN KEY (EmployeeSIN) REFERENCES Employees(DependantSIN)
);

CREATE TABLE Supervises(
    SubordinateIN int NOT NULL,
    ManagerSIN int NOT NULL,
    FOREIGN KEY (SubordinateSIN) REFERENCES Employees(SubordinateSIN),
    FOREIGN KEY (ManagerSIN) REFERENCES Employees(ManagerSIN)
);

CREATE TABLE Departments(
    Name CHAR(20),
    UNIQUE(Name),
    ID int,
    UNIQUE(ID),
    PRIMARY KEY(SID, TID)
);

CREATE TABLE Locations(
    Name CHAR(20) NOT NULL,
    DeptNum INT PRIMARY KEY NOT NULL
);

CREATE TABLE Projects(
    ID int PRIMARY KEY,
    Location CHAR(20) NOT NULL,
    Name CHAR(20) NOT NULL,
    Stage CHAR(20) NOT NULL,
    DeptID int NOT NULL,
    ManagerID int NOT NULL,
    FOREIGN KEY (DeptID) REFERENCES Departments(DeptID),
    FOREIGN KEY (ManagerID) REFERENCES Employees(ManagerID)    
);

CREATE TABLE WorksOn(
    WorkerSIN int NOT NULL,
    ProjectID int NOT NULL,
    HoursWorked int,
    FOREIGN KEY (WorkerSIN) REFERENCES Employee(WorkerSIN),
    FOREIGN KEY (ProjectID) REFERENCES Projects(ProjectID)
 );
 
 CREATE TABLE Manages(
    DeptNum int NOT NULL,
    ManagerSIN int NOT NULL,
    StartDate date NOT NULL,
    FOREIGN KEY (ManagerSIN) REFERENCES Employee(ManagerSIN),
    FOREIGN KEY (DeptNum) REFERENCES Departments(DeptNum)
  );
    
